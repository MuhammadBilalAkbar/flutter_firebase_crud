## 1. Research: Flutter CRUD Operation through Firestore Firebase

- Keywords:
    - firestore crud flutter
    - Flutter crud operation through firestore firebase tutorial
    - flutter firebase crud github
    - flutter firestore
    - flutter firestore crud operations
    - firebase firestore crud flutter
    - firebase crud flutter
    - Flutter crud operation through firestore firebase tutorial github
    - flutter-firebase crud github
    - firebase crud operations
    - firebase crud operations flutter
    - flutter firebase realtime database crud
    - flutter firestore github
    - flutter firestore create, read, update, and delete
- Video Title: CRUD Operations in Flutter using Firebase Firestorez

## 2. Research: Competitors

**Flutter Videos/Articles**

- Playlist: 39K: https://www.youtube.com/watch?v=agxDK0qmH88&list=PLFyjjoCMAPtxS6Cx1XSjCfxOxHQ4_e0sL
- 56K: https://youtube.com/watch?v=bnZUyHNaxfU
- 185K: https://www.youtube.com/watch?v=ErP_xomHKTw
- 2.4K: https://www.youtube.com/watch?v=KS8ZKWyX9IA
- 18K: https://www.youtube.com/watch?v=Du_ol23lCWA
- 2.1K: https://www.youtube.com/watch?v=6nAcXJFYS6o
- Playlist: 28K: https://www.youtube.com/watch?v=kY7QPqXc83A&list=PLjOFHn8uDrvR-nZtbKtV6NX_-4GaBkGNg
- 6.3K: https://www.youtube.com/watch?v=4iQeSN1zGs4
- 1.1K: https://www.youtube.com/watch?v=y8K_GTHP_VU
- 54K: https://www.youtube.com/watch?v=n1PM9XcYD5s
- 51K: https://www.youtube.com/watch?v=LlQimtjqZ9A
- https://www.krasamo.com/cloud-firestore-firebase-basics/
- https://medium.com/firebase-developers/firebase-firestore-crud-realtime-database-b476ca5f857c
- https://www.freecodespot.com/blog/crud-in-flutter-using-firebase/
- https://www.dbestech.com/tutorials/flutter-firebase-firestore-crud-create-update-delete-operations-real-time-database
- https://www.geeksforgeeks.org/user-authentication-and-crud-operation-with-firebase-cloud-firestore-database-in-flutter/
- https://www.c-sharpcorner.com/learn/learn-flutter/firebase-firestore-crud-operations
- https://dev.to/uche_emma/building-crud-app-with-flutter-and-firebase-5a43
- https://www.kindacode.com/article/flutter-firestore-database/
- https://flutterawesome.com/firebase-crud-operation-in-flutter/
- https://filledstacks.com/post/firestore-crud-in-flutter
- https://blog.codemagic.io/integrate-firebase-cloud-firestore-with-flutter-perform-crud/
- https://steemit.com/utopian-io/@tensor/using-cloud-firestore-as-a-realtime-datastore-for-crud-with-dart-s-flutter-framework
- https://support.syncfusion.com/kb/article/11194/how-to-perform-the-crud-operations-in-flutter-calendar-using-firestore-database
- https://morioh.com/a/38d963805a67/build-a-crud-app-using-firebase-and-flutter-provider
- https://blog.rehearse.sh/firebase-with-flutter-and-crud-operations-f69941302763
- https://medium.flutterdevs.com/using-firebase-firestore-in-flutter-b0ea2c62bc7
- https://flutterx.com/flutter-crud-operations-using-firebase-cloud-firestore-2021-05-22
- https://www.joyk.com/dig/detail/1621919932336639
- https://dormoshe.io/trending-news/flutter-crud-operations-using-firebase-cloud-firestore-30683?utm_source=facebook&utm_campaign=facebook
- https://julow.com/article/3
- https://reactplay.hashnode.dev/firestore-crud-firebase
- https://www.dhiwise.com/post/how-to-streamline-your-application-with-flutter-getx-crud-api
- https://blog.arrowhitech.com/crud-operations-overview-and-how-to-perform-it-using-flutter-in-firestore/
- https://fluttertalk.com/flutter-firebase-crud-tutorial/

**Android/Swift/React Videos**

- Playlist:
  7.8K: https://www.youtube.com/watch?v=N4d4_zFR1nw&list=PL_QrnahGtqYAtYIoGod00kutYTvhq4HMU
- Playlist: 12K: https://youtube.com/watch?v=cnx6c8zSsSQ&list=PLdRq0mbeEBmzaKvIbEX-n0VZwStsA0pv-
- Playlist: 16K: https://www.youtube.com/watch?v=faFEw4JQdbw&list=PLs1bCj3TvmWmC4WsOGQiw97o_zNNyusAz
- 55K: https://www.youtube.com/watch?v=-Gvpf8tXpbc
- 910: https://www.youtube.com/watch?v=sAnffThJwuo
- 11K: https://www.youtube.com/watch?v=1Ifc2g6Hv8k
- Playlist:
  2.4K: https://www.youtube.com/watch?v=Eg2aGWblQvk&list=PLjnZx7KD6m-ySasHtRKIX-04VuOYmGBmr
- 96K: https://www.youtube.com/watch?v=DWIGAkYkpg8
- 5.7K: https://www.youtube.com/watch?v=Ti2BDPvzAqc
- 1.5K: https://www.youtube.com/watch?v=sjOFc3B7G_s
- 1.7K: https://www.youtube.com/watch?v=BST_TSBY-tw
- 5.4K: https://www.youtube.com/watch?v=w7zwyOW83HU
- https://www.geeksforgeeks.org/user-authentication-and-crud-operation-with-firebase-realtime-database-in-android/
- https://gist.github.com/kosenshou/186c1e1025d7401da024081c42df2cfa
- https://por-porkaew15.medium.com/crud-firestore-with-kotlin-e967743db5ab
- https://firebase.google.com/docs/firestore/quickstart
- https://www.simplifiedcoding.net/firebase-realtime-database-crud/
- https://www.androidmads.info/2018/05/crud-operations-with-firebase-cloud.html
- https://firebase.google.com/docs/database/android/read-and-write
- https://morioh.com/a/71ad17bc4000/cloud-firestore-android-example-crud-operations-with-recyclerview-grokonez
- https://www.krasamo.com/cloud-firestore-firebase-basics/
- https://dev.to/albertogiambone/firestore-swift-crud-1pmd
- https://testfairy.com/blog/getting-started-with-firebase-cloud-firestore-in-ios-project/
- https://medium.com/swift-productions/swiftui-firestore-crud-mvvm-3d816f731b44
- https://www.positronx.io/create-react-native-firebase-crud-app-with-firestore/
- https://blog.logrocket.com/build-crud-application-react-firebase-web-sdk-v9/
- https://betterprogramming.pub/swift-how-to-create-a-generic-backend-firebase-api-b6396208f460
- https://medium.com/swift-productions/swiftui-firestore-crud-mvvm-3d816f731b44
- https://betterprogramming.pub/swift-how-to-create-a-generic-backend-firebase-api-b6396208f460
- https://www.positronx.io/create-react-native-firebase-crud-app-with-firestore/
- https://rnfirebase.io/firestore/usage
- https://blog.logrocket.com/build-crud-application-react-firebase-web-sdk-v9/
- https://enappd.com/blog/react-native-firebase-crud-image-upload-and-phone-authentication/86/
- https://www.djamware.com/post/5bbcd38080aca7466989441b/react-native-firebase-tutorial-build-crud-firestore-app
- https://www.itechinsiders.com/how-to-integrate-firebase-firestore-with-react-native-app/
- https://blog.openreplay.com/build-a-crud-app-with-react-and-firebase/
- https://medium.com/front-end-weekly/building-a-crud-app-with-react-and-firebase-a-step-by-step-guide-b2a5e95c59b0
- https://morioh.com/a/c75bdb16af5a/react-native-and-firebase-firestore-crud-using-expo
- https://jscrambler.com/blog/getting-started-with-firestore-and-react-native
- https://javascript.plainenglish.io/firebase-cloud-firestore-with-react-2d9aac16f60

**Great Features**

CRUD operations (Create, Read, Update, Delete) in Firebase Firestore offer several benefits and
functionalities:

**Document-Centric Structure:** The database stores data in the form of documents within
collections, providing a scalable and hierarchical structure for organizing data.

**Create (Add) Data:** Adding new data to the Firestore database is simple and efficient. It allows
the insertion of documents into collections.

**Read (Retrieve) Data:** Retrieving data is fast and flexible. Firestore supports powerful querying
mechanisms, enabling the retrieval of specific documents or sets of documents based on various
conditions.

**Update (Modify) Data:** Firestore supports efficient modification of existing data. It provides
the ability to update specific fields within documents without overwriting the entire document.

**Delete (Remove) Data:** Deletion of unwanted data is straightforward. Firestore allows the removal
of specific documents or fields within documents, maintaining data integrity.

**Scalability and Performance:** Firestore is optimized for scalability and performance, ensuring
smooth operations even with large datasets and heavy usage.

**Security Rules:** It offers powerful security rules to control and secure data access based on
user authentication and specific conditions, ensuring data protection and privacy.

**Offline Data Persistence:** Firestore provides offline support, enabling users to access data even
when offline, with automatic synchronization upon reconnecting.

These features collectively make Firestore an efficient and developer-friendly solution for handling
CRUD operations in a real-time and scalable environment.

**Problems from Videos**

- **Question:** In this [video](https://www.youtube.com/watch?v=ErP_xomHKTw&t=586s) at 9:46. error:
  The method 'map' can't be unconditionally invoked because the receiver can be 'null'. (
  Documentation) <br/>
  **Answer:** Follow this
  link: https://stackoverflow.com/questions/67575893/the-method-cant-be-unconditionally-invoked-because-the-receiver-can-be-nu

- **Question:** How can i check if a document inside my firebase database with a given id is already
  inside my collection? Would help me a lot and im struggling at the moment! <br/>
  **Answer:** Check out this solution: https://stackoverflow.com/a/62735067

- **Question:** how can i pass the data from the "ListTile" into da second screen like DetailScreen.
  Like click the frist one -> Detailscreen opens with the informations. <br/>
  **Answer:** Check out this video: https://youtu.be/l3KnuUmlr-w I hope this may help you!

- **Question:** I get this error on the part users.map(buildUsers).toList(),
  it says: The method 'map' isn't defined for the type 'Object'.
  Try correcting the name to the name of an existing method, or defining a method named 'map'. <br/>
  **Answer:** Follow this
  link: https://stackoverflow.com/questions/68723640/the-method-map-isnt-defined-for-the-type-function-try-correcting-the-name

- **Question:** Can you please advise how can we organize firestore field value to some array.
  Something like name[]={Sarah,Jhone, mike}, name[1]=Sarah, name[2]=Jhone <br/>
  **Answer:** Check out this solution: https://stackoverflow.com/a/52741592

- **Question:** I kept on getting errors using the decoration: decoration('') And also the
  DateFormat('') <br/>
  **Answer:** Follow this
  link: https://stackoverflow.com/questions/73339700/error-flutter-box-decoration-image-no-working-with-unexpected-error

- **Question:** may i ask how do we get data from a single document with an autogenerated id instead
  of the personal create ID.
    ```dart
    final userDoc = FirebaseFirestore.instance.collection("users").doc("my-id");
    ```

I want to place an auto generated ID inside .doc() call.<br/>
**Answer:** Follow this
link: https://stackoverflow.com/questions/53517382/query-a-single-document-from-firestore-in-flutter-cloud-firestore-plugin

- **Question:** my snapshot in readUsers() always falls into ''error'' condition. When I use print(
  snapshot.data) I always get null, do you know why? <br/>
  **Answer:** Follow this
  link: https://stackoverflow.com/questions/59073164/snapshot-data-is-null-in-flutter

- **Question:** I have a data field as a reference value of another document. So how can i get
  value for that reference and display. <br/>
  **Answer:** Follow this
  link: https://stackoverflow.com/questions/69732901/flutter-firestore-how-to-get-data-from-a-document-reference-in-a-document-fiel

- **Question:** got snapshot.haserror , Null data. <br/>
  **Answer:** Follow this
  link: https://stackoverflow.com/questions/68500320/streambuilder-snapshot-is-null-and-has-error

- **Question:** Exception has occurred.
  FirebaseException ([cloud_firestore/permission-denied] The caller does not have permission to
  execute the specified operation.) help me ! <br/>
  **Answer:** In most cases it means that your user is logged out and trying to access something
  that is not required. It also happens when we set rules in the firebase.

- **Question:** what if user offline? <br/>
  **Answer:** You can use ConnectivityManager to handle the Internet state.

- **Question:** How do I make only specific items appear on the screen???, for example, when the
  price is greater than 20, please someone help me! <br/>
  **Answer:** See this code:
  ```dart
  firebase.database().ref('"documentName').orderBy(id).
            .startAt(startPrice)
            .endAt(endPrice)
            .limitToLast(15)
  ```

- **Question:** How to add quantity? <br/>
  **Answer:** You can just add a new field in the documents. and read that along with other fields.

**Problems from Flutter Stackoverflow**

- https://stackoverflow.com/questions/69692070/cant-link-flutter-web-application-to-firebase-project-infinite-loading
- https://stackoverflow.com/questions/66758902/delete-data-from-firebase-by-id-using-flutter
- https://stackoverflow.com/questions/56012131/flutter-firestore-check-if-document-id-already-exists
- https://stackoverflow.com/questions/70404936/missing-firebase-options-dart-file-in-course-get-to-know-firebase-for-flutter
- https://stackoverflow.com/questions/50542771/stream-builder-from-firestore-to-flutter
- https://stackoverflow.com/questions/52613370/flutter-how-to-add-firebase-auth-user-credentials-to-new-records-firestore-do
- https://stackoverflow.com/questions/46554091/cloud-firestore-collection-count

## 3. Video Structure

**Main Points / Purpose Of Lesson**

1. In this video lesson, I will show you how to perform CRUD (Create, Read, Update, Delete)
   operations in firebase firestore.
2. Main Points:
    - Create data
    - Read data
    - Update data
    - Delete data
3. So, it is NoSQL cloud database and has real-time updates, scalability, security, ease of use,
   offline support, integration with other Firebase services, serverless architecture, and
   cost-effective pricing make it an excellent choice for a wide range of applications.

**The Structured Main Content**

# Integrate Firebase with Flutter:

You can integrate firebase with flutter by watching
this [video](https://youtu.be/G-mbqiE87Lw?si=hR25yv0NnSVMx6NX).
**Or** you can also
visit [firebase.google.com](https://firebase.google.com/docs/flutter/setup?platform=android) to
follow official documentation.

# Code Explanation:

### main.dart:

Inside `main.dart` file, initialize widgets binding and and firebase.

```dart
Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
  runApp(const MyApp());
}
```

### student_model.dart:

Inside, student model class:

- Let's create a student class with id, name, age, and birthday parameters.
- id parameter is optional and other three parameters are required.
- toJson converts dart class data to json object and fromJson converts json object to dart class
  data.
  **Note:** In toJson method, we are saving date of birth on firebase firestore in the dart date
  form. But firebase firestore save time in it as `TimeStamp`. So, in fromJson method, first we have
  to take birthday as `TimeStamp` from firebase and then convert it into dart date format
  using `colud_firestore` package.It converts Timestamp to DateTime.

```dart
import 'package:cloud_firestore/cloud_firestore.dart';

class Student {
  String id;
  final String name;
  final int age;
  final DateTime birthday;

  Student({
    required this.id,
    required this.name,
    required this.age,
    required this.birthday,
  });

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'name': name,
      'age': age,
      'birthday': birthday,
    };
  }

  factory Student.fromJson(String id, Map<String, dynamic> json) {
    return Student(
      id: id,
      name: json['name'],
      age: json['age'],
      birthday: (json['birthday'] as Timestamp).toDate(),
    );
  }
}
```

### home_page.dart:

Inside home_page.dart file:

- First, let's create `studentColl` reference to use it everywhere in this file:
  ```dart
  final studentsCollection = FirebaseFirestore.instance.collection('students');
  ```
- Before build function, let's also initialize name, age and date of birth controllers and
  fetchStudents which is stream of list of students.
  ```dart
    final nameController = TextEditingController();
    final ageController = TextEditingController();
    final dobController = TextEditingController();

    late Stream<List<Student>> fetchStudents;
  
    @override
    void dispose() {
      nameController.dispose();
      ageController.dispose();
      dobController.dispose();
      super.dispose();
    }
  ```
- Let's create readStudents() method which is returning stream of list of students, call this method
  inside initState and save the result in `fetchStudents` variable.
  ```dart
  @override
  void initState() {
    super.initState();
    fetchStudents = readStudents();
  }
  ```
- Inside scaffold, we are creating an appBar and inside body we using `StreamBuilder` of type
  `List<Student>` wrapped by `Column` widget. `StreamBuilder` has two required parameters stream and
  builder.
    - For stream, we are calling fetchStudents variable.
    - For builder, we are checking if snapshot has data then return a `ListView.builder` wrapped
      by `Expanded` widget.
    - Listview builder has `itemBuilder` required property.
    - Let's set `itemCount` property to `students.length`.
    - `itemBuilder` is callback function. We are returning a `ListTile` widget
      with `leading`, `title`, and `trailing` properties.
        - Let's show the CircleAvatar in `leading`.
        - Let's show the id of student from firebase in `title`.
        - And for `subtitle`, let's show the id of student from firebase.
        - For `subtitle`, we are using `PopupMenuButton` and inside it, we are returning
          two `PopupMenuItem`s. One for editing the student and another for deleting the student.

  ```dart
            StreamBuilder<List<Student>>(
              stream: fetchStudents,
              builder: (context, snapshot) {
                if (snapshot.hasData) {
                  final students = snapshot.data!;
                  return Expanded(
                    child: ListView.builder(
                        itemCount: students.length,
                        itemBuilder: (context, index) {
                          final student = students[index];
                          return ListTile(
                            leading: CircleAvatar(
                              child: Text(student.age.toString()),
                            ),
                            title: Text(student.name),
                            subtitle: Text(student.birthday.toString()),
                            trailing: PopupMenuButton(
                              icon: const Icon(Icons.more_vert),
                              itemBuilder: (BuildContext context) {
                                return [
                                  PopupMenuItem(
                                    value: 1,
                                    child: ListTile(
                                      leading: const Icon(Icons.edit),
                                      title: const Text('Edit'),
                                      onTap: () {
                                        Navigator.pop(context);
                                        showBottomSheet(
                                          isEditMode: true,
                                          id: student.id,
                                          name: student.name,
                                          age: student.age,
                                          dob: student.birthday,
                                        );
                                      },
                                    ),
                                  ),
                                  PopupMenuItem(
                                    value: 2,
                                    child: ListTile(
                                      leading: const Icon(Icons.delete),
                                      title: const Text('Delete'),
                                      onTap: () {
                                        Navigator.pop(context);
                                        deleteStudent(student.id);
                                      },
                                    ),
                                  ),
                                ];
                              },
                            ),
                          );
                        }),
                  );
                }
                if (snapshot.hasError) {
                  return Center(
                    child: Text(
                      'Something went wrong!\nError: ${snapshot.error}',
                      style: const TextStyle(
                        color: Colors.red,
                        fontWeight: FontWeight.bold,
                        fontSize: 30,
                      ),
                    ),
                  );
                } else {
                  return const Center(child: CircularProgressIndicator());
                }
              },
            ),
          ],
        ),
  ```

- After Column and inside Scaffold, I am creating `floatingActionButton` to add a new student.Â¬

```dart
        floatingActionButton: FloatingActionButton(
          onPressed: () => showBottomSheet(isEditMode: false),
          tooltip: 'Add Student',
          child: const Icon(Icons.add),
        ),
```

- showBottomSheet() method:

```dart
  Future<void> showBottomSheet({
    required bool isEditMode,
    String? id,
    String? name,
    int? age,
    DateTime? dob,
  }) async {
    if (isEditMode) {
      nameController.text = name!;
      ageController.text = age!.toString();
      dobController.text = dob!.toIso8601String();
    }
    return showModalBottomSheet(
      isScrollControlled: true,
      isDismissible: true,
      context: context,
      builder: (context) => Padding(
        padding: EdgeInsets.only(
          top: 20,
          left: 20,
          right: 20,
          bottom: MediaQuery.of(context).viewInsets.bottom + 20,
        ),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            TextField(
              controller: nameController,
              decoration: const InputDecoration(hintText: 'Name'),
            ),
            const SizedBox(height: 16),
            TextField(
              controller: ageController,
              decoration: const InputDecoration(hintText: 'Age'),
              keyboardType: TextInputType.number,
            ),
            const SizedBox(height: 16),
            TextField(
              controller: dobController,
              decoration: const InputDecoration(hintText: 'Birthday'),
              onTap: selectDate,
            ),
            const SizedBox(height: 16),
            ElevatedButton(
              onPressed: () =>
                  isEditMode ? updateStudent(id!) : createStudent(),
              child: isEditMode ? const Text('Update') : const Text('Create'),
            ),
            ElevatedButton(
              onPressed: () => Navigator.pop(context),
              child: const Text('Cancel'),
            ),
          ],
        ),
      ),
    );
  }
```

- readStudent() method:

```dart
  Stream<List<Student>> readStudents() =>
      studentsCollection.snapshots().map((snapshot) => snapshot.docs
          .map((doc) => Student.fromJson(doc.id, doc.data()))
          .toList());

```

- updateStudent() method:

```dart
  void updateStudent(String id) {
    final student = Student(
      name: nameController.text,
      age: int.parse(ageController.text),
      birthday: DateTime.parse(dobController.text),
    );
    final json = student.toJson();
    studentsCollection.doc(id).update(json).then((value) {
      debugPrint('Student updated successfully');
    });
    Navigator.pop(context);
    clearData();
  }
```

- createStudent() method:

```dart
  void createStudent() {
    final student = Student(
      name: nameController.text,
      age: int.parse(ageController.text),
      birthday: DateTime.parse(dobController.text),
    );
    final json = student.toJson();
    studentsCollection.add(json).then((value) {
      debugPrint('New student added/created successfully');
    });
    // await studentCollection.doc().set({json});
    /// Behind the scenes, .add(...) and .doc().set(...) are completely equivalent,
    /// so you can use whichever is more convenient.
    Navigator.pop(context);
    clearData();
  }
```

- clearData() method clears the text fields text:

```dart
  void clearData() {
    ageController.clear();
    dobController.clear();
    nameController.clear();
  }
```

- deleteStudent() method:

```dart
  Future<void> deleteStudent(String id) async {
    studentColl.doc(id).delete().then((value) {
      debugPrint('Student deleted successfully');
    }).onError((error, stackTrace) {
      debugPrint(error.toString());
    });
  }
```

- selectDate() method:

```dart
  Future<void> selectDate() async {
    DateTime? picked = await showDatePicker(
      context: context,
      initialDate: DateTime.now(),
      firstDate: DateTime(2000),
      lastDate: DateTime.now(),
    );
    if (picked != null) {
      setState(() => dobController.text = picked.toString());
    }
  }
```